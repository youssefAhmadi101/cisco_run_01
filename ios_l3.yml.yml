---
- name: IOS Config Demo
  hosts: ios_conf_l3
  tasks:
  - name: config mode command
    ios_config:
      lines:
      - ip domain name sii.com
  - name: config interface 01
    ios_config:
      parents: interface GigabitEthernet0/0/0/1
      lines:
        - ip address 2.2.2.2 255.255.255.0
        - description ansible_configured
      diff_against: startup
      save_when: modified
  - name: Configure Multiple interfaces
    ios_config:
      parents: "{{ item }}"
      lines:
        - description backup_int
      after:
        - no shutdown
      save_when: modified
    with_items:
        - interface GigabitEthernet0/0/0/0
